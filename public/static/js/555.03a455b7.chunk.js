"use strict";(self.webpackChunkbutil_admin=self.webpackChunkbutil_admin||[]).push([[555],{1555:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var r=n(4942),a=n(1413),i=n(5861),o=n(885),u=n(7757),l=n.n(u),s=n(2791),c=n(6907),d=n(6445),p=n(1889),f=n(8530),m=n(890),h=n(4518),g=n(4569),v=n.n(g),x=n(376),Z=n(9062),y=n(5671),b=n(3144),j=function(){function e(t,n,r){(0,y.Z)(this,e),this.category=void 0,this.category={title:t,image:n,uid:r}}return(0,b.Z)(e,[{key:"getCategory",value:function(){return this.category}}]),e}();function C(e){var t=e.data();return new j(t.title,t.image,e.id)}var w=j,F=n(2419),S=n(7621),I=n(2363),k=n(9504),T=n(2169),z=n(184);var R=function(e){var t=e.category,n=e.updateCategory,r=e.deleteCategory;return(0,z.jsxs)(S.Z,{children:[(0,z.jsx)(T.Z,{component:"img",alt:"green iguana",height:"200",image:t.image}),(0,z.jsx)(k.Z,{children:(0,z.jsx)(m.Z,{gutterBottom:!0,variant:"h5",component:"div",children:t.title})}),(0,z.jsxs)(I.Z,{children:[(0,z.jsx)(h.Z,{size:"small",onClick:function(e){return n(t)},children:"Edit"}),(0,z.jsx)(h.Z,{size:"small",onClick:function(e){return r(t.uid)},color:"error",children:"Delete"})]})]})},P=n(7391),q=n(3767),M=n(5289),_=n(7123),N=n(9157),L=n(5201),B=n(9396),D=(0,n(33).ZP)("img")({top:0,width:"100%",height:"100%",objectFit:"cover",position:"absolute"});var H=function(e){var t=e.imageFile,n=e.onImageChange,r=e.defaultImage,a=s.useState(null),i=(0,o.Z)(a,2),u=i[0],l=i[1];return s.useEffect((function(){if(null!==t){var e=new FileReader;e.readAsDataURL(t),e.onloadend=function(t){l([e.result])}}}),[t]),(0,z.jsxs)(f.Z,{sx:{pt:"100%",position:"relative",width:270},children:[(0,z.jsx)(D,{alt:"product image",src:u||r}),(0,z.jsxs)(h.Z,{variant:"contained",component:"label",startIcon:(0,z.jsx)(B.Z,{}),sx:{zIndex:9,bottom:16,right:16,position:"absolute",textTransform:"uppercase"},children:["Upload Image",(0,z.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:function(e){return n(e)},hidden:!0})]})]})};var J=function(e){var t=e.open,n=e.setOpen,r=e.imageFile,a=e.defaultImage,i=e.onImageChange,u=e.onSubmitForm,l=e.onTextChange,c=e.newCategory,d=e.update,p=s.useState(!1),f=(0,o.Z)(p,2),m=f[0],g=f[1],v=function(){n(!1)};return(0,z.jsx)(M.Z,{open:t,onClose:v,children:(0,z.jsxs)("form",{onSubmit:function(e){e.preventDefault(),null!==r||d?(g(!1),u(e)):g(!0)},children:[(0,z.jsx)(L.Z,{children:"Category Manager"}),(0,z.jsx)(N.Z,{children:(0,z.jsxs)(q.Z,{direction:"column",spacing:2,children:[(0,z.jsx)(H,{imageFile:r,defaultImage:a,onImageChange:function(e){return i(e)}}),(0,z.jsx)(P.Z,{required:!0,autoFocus:!0,id:"name",name:"title",label:"Category Name",fullWidth:!0,variant:"standard",value:c.title,onChange:function(e){return l(e)},error:m,helperText:m?"Image is required!":null})]})}),(0,z.jsxs)(_.Z,{children:[(0,z.jsx)(h.Z,{onClick:v,children:"Cancel"}),(0,z.jsx)(h.Z,{type:"submit",children:"Save"})]})]})})};var U=function(){var e=(0,x.h)().database,t=s.useState(!1),n=(0,o.Z)(t,2),u=n[0],g=n[1],y=s.useState([]),b=(0,o.Z)(y,2),j=b[0],S=b[1],I=s.useState(!1),k=(0,o.Z)(I,2),T=k[0],P=k[1],q=s.useState(null),M=(0,o.Z)(q,2),_=M[0],N=M[1],L=s.useState(null),B=(0,o.Z)(L,2),D=B[0],H=B[1],U=s.useState({uid:"",title:"",image:""}),W=(0,o.Z)(U,2),E=W[0],A=W[1],O=s.useState({uid:"",title:"",image:""}),V=(0,o.Z)(O,2),G=V[0],K=V[1],Q=s.useState(!1),X=(0,o.Z)(Q,2),Y=X[0],$=X[1];function ee(){return te.apply(this,arguments)}function te(){return(te=(0,i.Z)(l().mark((function e(){var t,n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("file",_),t.append("upload_preset","yys2sx1c"),t.append("cloud_name","nathanalz"),e.next=6,v().post("https://api.cloudinary.com/v1_1/nathanalz/image/upload",t);case 6:return n=e.sent,r=n.data.url,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return re.apply(this,arguments)}function re(){return(re=(0,i.Z)(l().mark((function e(){var t,n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("file",D),t.append("upload_preset","yys2sx1c"),t.append("cloud_name","nathanalz"),e.next=6,v().post("https://api.cloudinary.com/v1_1/nathanalz/image/upload",t);case 6:return n=e.sent,r=n.data.url,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return(ae=(0,i.Z)(l().mark((function t(n){var r,a,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),null===_){t.next=8;break}return t.next=4,ee();case 4:r=t.sent,a=new w(E.title,r.replace("http:","https:"),null),i=(0,Z.JU)((0,Z.hJ)(e,"categories")),(0,Z.pl)(i,a.getCategory()).then((function(e){P(!1),g(!u),A({uid:"",title:"",image:""}),N(null)})).catch((function(e){console.log(e.message)}));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ie(){return(ie=(0,i.Z)(l().mark((function t(n){var r,a,i,o,s;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),D){t.next=7;break}r=new w(G.title,G.image,G.uid),a=(0,Z.JU)(e,"categories",G.uid),(0,Z.pl)(a,r.getCategory()).then((function(e){$(!1),g(!u),K({uid:"",title:"",image:""}),H(null)})).catch((function(e){console.log(e.message)})),t.next=13;break;case 7:return t.next=9,ne();case 9:i=t.sent,o=new w(G.title,i.replace("http:","https:"),G.uid),s=(0,Z.JU)(e,"categories",G.uid),(0,Z.pl)(s,o.getCategory()).then((function(e){$(!1),g(!u),K({uid:"",title:"",image:""}),H(null)})).catch((function(e){console.log(e.message)}));case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function oe(){return(oe=(0,i.Z)(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Z.oe)((0,Z.JU)(e,"categories",n));case 2:g(!u);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return s.useEffect((function(){function t(){return(t=(0,i.Z)(l().mark((function t(){var n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.next=3,(0,Z.PL)((0,Z.hJ)(e,"categories"));case 3:t.sent.forEach((function(e){var t=C(e);n.push(t.getCategory())})),S((function(e){return n}));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e,u]),console.log(G),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(c.q,{children:(0,z.jsx)("title",{children:"Categories"})}),(0,z.jsxs)(d.Z,{sx:{mb:5},children:[(0,z.jsxs)(f.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:5,marginBottom:3},children:[(0,z.jsx)(m.Z,{variant:"h1",color:"primary",children:"Categories"}),(0,z.jsx)(h.Z,{variant:"contained",startIcon:(0,z.jsx)(F.Z,{}),onClick:function(e){return P(!0)},children:"Add Category"})]}),(0,z.jsx)(p.ZP,{container:!0,spacing:2,children:j.map((function(e,t){return(0,z.jsx)(p.ZP,{item:!0,sm:12,md:3,children:(0,z.jsx)(R,{category:e,updateCategory:function(e){return function(e){K(e),$(!0)}(e)},deleteCategory:function(e){return function(e){return oe.apply(this,arguments)}(e)}})},e.uid)}))})]}),(0,z.jsx)(J,{open:T,setOpen:function(e){return P(e)},imageFile:_,defaultImage:"https://res.cloudinary.com/nathanalz/image/upload/v1641871922/ButilMNL/sample_img_ve55kv.png",onImageChange:function(e){return function(e){N(e.target.files[0])}(e)},onSubmitForm:function(e){return function(e){return ae.apply(this,arguments)}(e)},onTextChange:function(e){return function(e){A((0,a.Z)((0,a.Z)({},E),{},(0,r.Z)({},e.target.name,e.target.value)))}(e)},newCategory:E,update:!1}),(0,z.jsx)(J,{open:Y,setOpen:function(e){return $(e)},imageFile:D,defaultImage:G.image,onImageChange:function(e){return function(e){H(e.target.files[0])}(e)},onSubmitForm:function(e){return function(e){return ie.apply(this,arguments)}(e)},onTextChange:function(e){return function(e){K((0,a.Z)((0,a.Z)({},G),{},(0,r.Z)({},e.target.name,e.target.value)))}(e)},newCategory:G,update:!0})]})}},7391:function(e,t,n){n.d(t,{Z:function(){return P}});var r=n(7462),a=n(3366),i=n(2791),o=(n(2007),n(8182)),u=n(9468),l=n(33),s=n(1894),c=n(7078),d=n(4527),p=n(8029),f=n(4925),m=n(8096),h=n(4942),g=n(6147),v=n(2930),x=n(4036),Z=n(1920),y=n(6309);function b(e){return(0,Z.Z)("MuiFormHelperText",e)}var j=(0,y.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),C=n(184),w=["children","className","component","disabled","error","filled","focused","margin","required","variant"],F=(0,l.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.size&&t["size".concat((0,x.Z)(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})((function(e){var t,n=e.theme,a=e.ownerState;return(0,r.Z)({color:n.palette.text.secondary},n.typography.caption,(t={textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0},(0,h.Z)(t,"&.".concat(j.disabled),{color:n.palette.text.disabled}),(0,h.Z)(t,"&.".concat(j.error),{color:n.palette.error.main}),t),"small"===a.size&&{marginTop:4},a.contained&&{marginLeft:14,marginRight:14})})),S=i.forwardRef((function(e,t){var n=(0,s.Z)({props:e,name:"MuiFormHelperText"}),i=n.children,l=n.className,c=n.component,d=void 0===c?"p":c,p=(0,a.Z)(n,w),f=(0,v.Z)(),m=(0,g.Z)({props:n,muiFormControl:f,states:["variant","size","disabled","error","filled","focused","required"]}),h=(0,r.Z)({},n,{component:d,contained:"filled"===m.variant||"outlined"===m.variant,variant:m.variant,size:m.size,disabled:m.disabled,error:m.error,filled:m.filled,focused:m.focused,required:m.required}),Z=function(e){var t=e.classes,n=e.contained,r=e.size,a=e.disabled,i=e.error,o=e.filled,l=e.focused,s=e.required,c={root:["root",a&&"disabled",i&&"error",r&&"size".concat((0,x.Z)(r)),n&&"contained",l&&"focused",o&&"filled",s&&"required"]};return(0,u.Z)(c,b,t)}(h);return(0,C.jsx)(F,(0,r.Z)({as:d,ownerState:h,className:(0,o.Z)(Z.root,l),ref:t},p,{children:" "===i?(0,C.jsx)("span",{className:"notranslate",dangerouslySetInnerHTML:{__html:"&#8203;"}}):i}))})),I=n(9321);function k(e){return(0,Z.Z)("MuiTextField",e)}(0,y.Z)("MuiTextField",["root"]);var T=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],z={standard:c.Z,filled:d.Z,outlined:p.Z},R=(0,l.ZP)(m.Z,{name:"MuiTextField",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),P=i.forwardRef((function(e,t){var n=(0,s.Z)({props:e,name:"MuiTextField"}),l=n.autoComplete,c=n.autoFocus,d=void 0!==c&&c,p=n.children,m=n.className,h=n.color,g=void 0===h?"primary":h,v=n.defaultValue,x=n.disabled,Z=void 0!==x&&x,y=n.error,b=void 0!==y&&y,j=n.FormHelperTextProps,w=n.fullWidth,F=void 0!==w&&w,P=n.helperText,q=n.id,M=n.InputLabelProps,_=n.inputProps,N=n.InputProps,L=n.inputRef,B=n.label,D=n.maxRows,H=n.minRows,J=n.multiline,U=void 0!==J&&J,W=n.name,E=n.onBlur,A=n.onChange,O=n.onFocus,V=n.placeholder,G=n.required,K=void 0!==G&&G,Q=n.rows,X=n.select,Y=void 0!==X&&X,$=n.SelectProps,ee=n.type,te=n.value,ne=n.variant,re=void 0===ne?"outlined":ne,ae=(0,a.Z)(n,T),ie=(0,r.Z)({},n,{autoFocus:d,color:g,disabled:Z,error:b,fullWidth:F,multiline:U,required:K,select:Y,variant:re}),oe=function(e){var t=e.classes;return(0,u.Z)({root:["root"]},k,t)}(ie);var ue={};if("outlined"===re&&(M&&"undefined"!==typeof M.shrink&&(ue.notched=M.shrink),B)){var le,se=null!=(le=null==M?void 0:M.required)?le:K;ue.label=(0,C.jsxs)(i.Fragment,{children:[B,se&&"\xa0*"]})}Y&&($&&$.native||(ue.id=void 0),ue["aria-describedby"]=void 0);var ce=P&&q?"".concat(q,"-helper-text"):void 0,de=B&&q?"".concat(q,"-label"):void 0,pe=z[re],fe=(0,C.jsx)(pe,(0,r.Z)({"aria-describedby":ce,autoComplete:l,autoFocus:d,defaultValue:v,fullWidth:F,multiline:U,name:W,rows:Q,maxRows:D,minRows:H,type:ee,value:te,id:q,inputRef:L,onBlur:E,onChange:A,onFocus:O,placeholder:V,inputProps:_},ue,N));return(0,C.jsxs)(R,(0,r.Z)({className:(0,o.Z)(oe.root,m),disabled:Z,error:b,fullWidth:F,ref:t,required:K,color:g,variant:re,ownerState:ie},ae,{children:[B&&(0,C.jsx)(f.Z,(0,r.Z)({htmlFor:q,id:de},M,{children:B})),Y?(0,C.jsx)(I.Z,(0,r.Z)({"aria-describedby":ce,id:q,labelId:de,value:te,input:fe},$,{children:p})):fe,P&&(0,C.jsx)(S,(0,r.Z)({id:ce},j,{children:P}))]}))}))}}]);
//# sourceMappingURL=555.03a455b7.chunk.js.map