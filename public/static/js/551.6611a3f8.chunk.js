"use strict";(self.webpackChunkbutil_admin=self.webpackChunkbutil_admin||[]).push([[551],{3576:function(e,n,t){var r=t(1413),i=t(2791),o=t(4575),a=t(9658),s=t(184),c=i.forwardRef((function(e,n){return(0,s.jsx)(a.Z,(0,r.Z)({elevation:6,ref:n,variant:"filled"},e))}));n.Z=function(e){var n=e.openSnackbar,t=e.success,r=e.message,i=e.setOpenSnackbar,a=function(e,n){"clickaway"!==n&&i(!1)};return(0,s.jsx)(o.Z,{open:n,autoHideDuration:6e3,onClose:a,children:(0,s.jsx)(c,{onClose:a,severity:t?"success":"error",sx:{width:"100%"},children:r})})}},9267:function(e,n,t){t.d(n,{H:function(){return a}});var r=t(5671),i=t(3144),o=function(){function e(n){(0,r.Z)(this,e),this.product=void 0,this.product=n}return(0,i.Z)(e,[{key:"getProduct",value:function(){return this.product}},{key:"setImage",value:function(e){this.product.image=e}}]),e}();function a(e){var n=e.data(),t={productId:e.id,categoryId:n.categoryId,content:n.content,description:n.description,image:n.image,name:n.name,price:n.price,promo:n.promo,stocks:n.stocks,storageLife:n.storageLife,type:n.type};return new o(t)}n.Z=o},2911:function(e,n,t){t(2791);var r=t(7621),i=t(1889),o=t(7391),a=t(3466),s=t(4518),c=t(8530),u=t(890),l=t(184);n.Z=function(e){var n=e.productInfo,t=e.onTextChange,d=e.onNumberChange,p=e.onSubmitForm,h=e.error,m=n.categoryId,f=n.content,x=n.description,g=n.name,Z=n.price,j=n.promo,v=n.stocks,b=n.storageLife,y=n.type;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(r.Z,{sx:{width:"100%",padding:3},children:(0,l.jsx)("form",{onSubmit:function(e){return p(e)},children:(0,l.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,l.jsx)(i.ZP,{item:!0,sm:12,md:6,sx:{width:"100%"},children:(0,l.jsx)(o.Z,{fullWidth:!0,required:!0,name:"name",label:"Product Name",variant:"outlined",value:g,onChange:function(e){return t(e)}})}),(0,l.jsx)(i.ZP,{item:!0,sm:12,md:6,sx:{width:"100%"},children:(0,l.jsx)(o.Z,{fullWidth:!0,required:!0,name:"price",type:"number",label:"Price",variant:"outlined",value:Z,onChange:function(e){return d(e)},InputProps:{startAdornment:(0,l.jsx)(a.Z,{position:"start",children:"\u20b1"})}})}),(0,l.jsx)(i.ZP,{item:!0,sm:12,md:6,sx:{width:"100%"},children:(0,l.jsx)(o.Z,{fullWidth:!0,required:!0,name:"stocks",type:"number",label:"Stocks",variant:"outlined",value:v,onChange:function(e){return d(e)}})}),(0,l.jsx)(i.ZP,{item:!0,sm:12,md:6,sx:{width:"100%"},children:(0,l.jsx)(o.Z,{fullWidth:!0,required:!0,name:"content",type:"number",label:"Content",variant:"outlined",value:f,onChange:function(e){return d(e)},InputProps:{endAdornment:(0,l.jsx)(a.Z,{position:"end",children:"grams"})}})}),(0,l.jsx)(i.ZP,{item:!0,sm:12,md:6,sx:{width:"100%"},children:(0,l.jsx)(o.Z,{fullWidth:!0,required:!0,name:"promo",type:"number",label:"Promo",variant:"outlined",value:j,onChange:function(e){return d(e)},InputProps:{endAdornment:(0,l.jsx)(a.Z,{position:"end",children:"%"})}})}),(0,l.jsx)(i.ZP,{item:!0,sm:12,md:6,sx:{width:"100%"},children:(0,l.jsx)(o.Z,{fullWidth:!0,required:!0,name:"storageLife",type:"number",label:"Storage Life",variant:"outlined",value:b,onChange:function(e){return d(e)},InputProps:{endAdornment:(0,l.jsx)(a.Z,{position:"end",children:"days"})}})}),(0,l.jsx)(i.ZP,{item:!0,sm:12,md:6,sx:{width:"100%"},children:(0,l.jsx)(o.Z,{fullWidth:!0,required:!0,name:"categoryId",label:"Category",variant:"outlined",value:m,onChange:function(e){return t(e)}})}),(0,l.jsx)(i.ZP,{item:!0,sm:12,md:6,sx:{width:"100%"},children:(0,l.jsx)(o.Z,{fullWidth:!0,required:!0,name:"type",label:"Type",variant:"outlined",value:y,onChange:function(e){return t(e)}})}),(0,l.jsx)(i.ZP,{item:!0,sm:12,md:12,sx:{width:"100%"},children:(0,l.jsx)(o.Z,{fullWidth:!0,required:!0,multiline:!0,rows:3,name:"description",label:"Description",variant:"outlined",value:x,onChange:function(e){return t(e)}})}),null!==h&&(0,l.jsx)(i.ZP,{item:!0,sm:12,md:12,sx:{width:"100%"},children:(0,l.jsx)(c.Z,{component:"div",sx:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#f294a5",height:50,width:"100%",filter:"brightness(85%)"},children:(0,l.jsx)(u.Z,{variant:"h5",align:"center",color:"white",children:"Image is required!"})})}),(0,l.jsx)(i.ZP,{item:!0,sm:12,md:12,sx:{width:"100%"},children:(0,l.jsx)(s.Z,{type:"submit",variant:"contained",fullWidth:!0,children:"SAVE PRODUCT"})})]})})})})}},258:function(e,n,t){var r=t(885),i=t(2791),o=t(7621),a=t(8530),s=t(4518),c=t(9396),u=t(33),l=t(184),d=(0,u.ZP)("img")({top:0,width:"100%",height:"100%",objectFit:"cover",position:"absolute"});n.Z=function(e){var n=e.imageFile,t=e.onImageChange,u=e.defaultImage,p=i.useState(null),h=(0,r.Z)(p,2),m=h[0],f=h[1];return i.useEffect((function(){if(null!==n){var e=new FileReader;e.readAsDataURL(n),e.onloadend=function(n){f([e.result])}}}),[n]),(0,l.jsx)(o.Z,{sx:{width:"100%"},children:(0,l.jsxs)(a.Z,{sx:{pt:"100%",position:"relative"},children:[(0,l.jsx)(d,{alt:"product image",src:m||u}),(0,l.jsxs)(s.Z,{variant:"contained",component:"label",startIcon:(0,l.jsx)(c.Z,{}),sx:{zIndex:9,bottom:16,right:16,position:"absolute",textTransform:"uppercase"},children:["Upload Image",(0,l.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:function(e){return t(e)},hidden:!0})]})]})})}},7551:function(e,n,t){t.r(n),t.d(n,{default:function(){return J}});var r=t(4942),i=t(1413),o=t(5861),a=t(885),s=t(7757),c=t.n(s),u=t(2791),l=t(6907),d=t(1889),p=t(6445),h=t(8530),m=t(890),f=t(4518),x=t(3400),g=t(3767),Z=t(5193),j=t(6871),v=t(4569),b=t.n(v),y=t(376),w=t(9062),C=t(9267),k=t(9823),P=t(7247),I=t(258),S=t(2911),D=t(5289),F=t(7123),q=t(9157),T=t(3366),W=t(7462),L=(t(2007),t(9468)),A=t(33),M=t(1894),O=t(1920);function R(e){return(0,O.Z)("MuiDialogContentText",e)}(0,t(6309).Z)("MuiDialogContentText",["root"]);var U=t(184),_=["children"],z=(0,A.ZP)(m.Z,{shouldForwardProp:function(e){return(0,A.FO)(e)||"classes"===e},name:"MuiDialogContentText",slot:"Root",overridesResolver:function(e,n){return n.root}})({}),N=u.forwardRef((function(e,n){var t=(0,M.Z)({props:e,name:"MuiDialogContentText"}),r=(0,T.Z)(t,_),i=function(e){var n=e.classes,t=(0,L.Z)({root:["root"]},R,n);return(0,W.Z)({},n,t)}(r);return(0,U.jsx)(z,(0,W.Z)({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:r},t,{classes:i}))})),E=t(5201);var H=function(e){var n=e.openDialog,t=e.setOpenDialog,r=e.deleteProduct;function i(){t(!1)}return(0,U.jsxs)(D.Z,{open:n,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,U.jsx)(E.Z,{id:"alert-dialog-title",children:"Are you sure you want to delete this product?"}),(0,U.jsx)(q.Z,{children:(0,U.jsx)(N,{id:"alert-dialog-description",children:"By clicking delete, this product will no longer be available. If you need this product in the future, you may need to add it again."})}),(0,U.jsxs)(F.Z,{children:[(0,U.jsx)(f.Z,{onClick:i,children:"Cancel"}),(0,U.jsx)(f.Z,{onClick:r,color:"error",autoFocus:!0,children:"Delete"})]})]})},B=t(3576);var J=function(){var e=(0,j.UO)().id,n=(0,y.h)().database,t=(0,j.s0)(),s=(0,u.useState)({productId:"",categoryId:"",content:0,description:"",image:"",name:"",price:0,promo:0,stocks:0,storageLife:0,type:""}),v=(0,a.Z)(s,2),D=v[0],F=v[1],q=(0,u.useState)(null),T=(0,a.Z)(q,2),W=T[0],L=T[1],A=(0,u.useState)(null),M=(0,a.Z)(A,2),O=M[0],R=M[1],_=(0,u.useState)({openSnackbar:!1,success:!0,message:""}),z=(0,a.Z)(_,2),N=z[0],E=z[1],J=(0,u.useState)(!1),V=(0,a.Z)(J,2),Q=V[0],G=V[1],K=(0,u.useState)("https://res.cloudinary.com/nathanalz/image/upload/v1641871922/ButilMNL/sample_img_ve55kv.png"),X=(0,a.Z)(K,2),Y=X[0],$=X[1];function ee(){return ne.apply(this,arguments)}function ne(){return(ne=(0,o.Z)(c().mark((function e(){var n,t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",W),n.append("upload_preset","yys2sx1c"),n.append("cloud_name","nathanalz"),e.next=6,b().post("https://api.cloudinary.com/v1_1/nathanalz/image/upload",n);case 6:return t=e.sent,r=t.data.url,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=(0,o.Z)(c().mark((function r(o){var a,s,u,l;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o.preventDefault(),a=Y,null===W){r.next=7;break}return r.next=5,ee();case 5:s=r.sent,a=s.replace("http:","https:");case 7:(u=new C.Z(D)).setImage(a),l=(0,w.JU)(n,"products",e),(0,w.pl)(l,u.getProduct()).then((function(e){E((0,i.Z)((0,i.Z)({},N),{},{openSnackbar:!0,success:!0,message:"Product was edited successfully!"})),t("/dashboards/products")})).catch((function(e){E((0,i.Z)((0,i.Z)({},N),{},{openSnackbar:!0,success:!1,message:"Failed to edit product."})),console.log(e.message)}));case 11:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function re(){return(re=(0,o.Z)(c().mark((function r(){return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:(0,w.oe)((0,w.JU)(n,"products",e)).then((function(e){E((0,i.Z)((0,i.Z)({},N),{},{openSnackbar:!0,success:!0,message:"Product deleted successfully!"})),t("/dashboards/products")})).catch((function(e){E((0,i.Z)((0,i.Z)({},N),{},{openSnackbar:!0,success:!1,message:"Failed to delete product."})),console.log(e.message)}));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}u.useEffect((function(){function r(){return(r=(0,o.Z)(c().mark((function r(){var i,o,a;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=(0,w.JU)(n,"products",e),r.next=3,(0,w.QT)(i);case 3:(o=r.sent).exists()?(a=(0,C.H)(o),F((function(e){return a.getProduct()})),$((function(e){return a.getProduct().image}))):t("/404");case 5:case"end":return r.stop()}}),r)})))).apply(this,arguments)}!function(){r.apply(this,arguments)}()}),[e,n,t]);var ie=(0,Z.Z)("(min-width:600px)");return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(l.q,{children:(0,U.jsx)("title",{children:"Edit Product"})}),(0,U.jsxs)(p.Z,{sx:{mb:5},children:[(0,U.jsxs)(h.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:5,marginBottom:3},children:[(0,U.jsx)(m.Z,{variant:"h1",color:"primary",children:"Edit Product"}),(0,U.jsxs)(g.Z,{direction:"row",spacing:2,children:[ie?(0,U.jsx)(f.Z,{variant:"contained",color:"error",startIcon:(0,U.jsx)(k.Z,{}),onClick:function(e){return t("/dashboards/products")},children:"Cancel"}):(0,U.jsx)(x.Z,{onClick:function(e){return t("/dashboards/products")},color:"error",children:(0,U.jsx)(k.Z,{})}),ie?(0,U.jsx)(f.Z,{variant:"contained",color:"error",startIcon:(0,U.jsx)(P.Z,{}),onClick:function(e){return G(!0)},children:"Delete"}):(0,U.jsx)(x.Z,{onClick:function(e){return G(!0)},color:"error",children:(0,U.jsx)(P.Z,{})})]})]}),(0,U.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,U.jsx)(d.ZP,{item:!0,xs:12,md:4,children:(0,U.jsx)(I.Z,{imageFile:W,onImageChange:function(e){return function(e){R(null),L(e.target.files[0])}(e)},defaultImage:Y})}),(0,U.jsx)(d.ZP,{item:!0,xs:12,md:8,children:(0,U.jsx)(S.Z,{productInfo:D,onTextChange:function(e){return function(e){F((0,i.Z)((0,i.Z)({},D),{},(0,r.Z)({},e.target.name,e.target.value)))}(e)},onNumberChange:function(e){return function(e){F((0,i.Z)((0,i.Z)({},D),{},(0,r.Z)({},e.target.name,isNaN(parseFloat(e.target.value))?"":parseFloat(e.target.value))))}(e)},onSubmitForm:function(e){return function(e){return te.apply(this,arguments)}(e)},error:O})})]})]}),(0,U.jsx)(B.Z,{openSnackbar:N.openSnackbar,success:N.success,message:N.message,setOpenSnackbar:function(e){return E((0,i.Z)((0,i.Z)({},N),{},{openSnackbar:e}))}}),(0,U.jsx)(H,{openDialog:Q,setOpenDialog:function(e){return G(e)},deleteProduct:function(){return function(){return re.apply(this,arguments)}()}})]})}},7247:function(e,n,t){var r=t(5318);n.Z=void 0;var i=r(t(5649)),o=t(184),a=(0,i.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");n.Z=a}}]);
//# sourceMappingURL=551.6611a3f8.chunk.js.map