"use strict";(self.webpackChunkbutil_admin=self.webpackChunkbutil_admin||[]).push([[281],{3576:function(e,n,t){var r=t(1413),i=t(2791),c=t(4575),s=t(9658),a=t(184),o=i.forwardRef((function(e,n){return(0,a.jsx)(s.Z,(0,r.Z)({elevation:6,ref:n,variant:"filled"},e))}));n.Z=function(e){var n=e.openSnackbar,t=e.success,r=e.message,i=e.setOpenSnackbar,s=function(e,n){"clickaway"!==n&&i(!1)};return(0,a.jsx)(c.Z,{open:n,autoHideDuration:6e3,onClose:s,children:(0,a.jsx)(o,{onClose:s,severity:t?"success":"error",sx:{width:"100%"},children:r})})}},776:function(e,n,t){t.d(n,{$:function(){return s}});var r=t(5671),i=t(3144),c=function(){function e(n){(0,r.Z)(this,e),this.riderObject=void 0,this.riderObject=n}return(0,i.Z)(e,[{key:"getRider",value:function(){return this.riderObject}},{key:"setAccount",value:function(e){this.riderObject.account=e}}]),e}();function s(e){var n=e.data(),t={riderId:e.id,active:n.active,assignedDeliver:n.assignedDeliver};return new c(t)}n.Z=c},4993:function(e,n,t){t.d(n,{B:function(){return s}});var r=t(5671),i=t(3144),c=function(){function e(n){(0,r.Z)(this,e),this.userObject=void 0,this.userObject=n}return(0,i.Z)(e,[{key:"getUser",value:function(){return this.userObject}}]),e}();function s(e){var n=e.data(),t={userId:e.id,contact:n.contact,firstName:n.firstName,lastName:n.lastName,gender:n.gender};return new c(t)}},7281:function(e,n,t){t.r(n),t.d(n,{default:function(){return Q}});var r=t(1413),i=t(5861),c=t(885),s=t(7757),a=t.n(s),o=t(2791),u=t(6907),l=t(6445),d=t(8530),h=t(890),f=t(4518),Z=t(6871),x=t(376),m=t(9062),j=t(4993),v=t(776),g=t(2982),p=t(3967),b=t(7621),k=t(9585),y=t(8096),S=t(4925),w=t(9321),C=t(5022),I=t(4721),O=t(9281),W=t(9836),A=t(6890),P=t(5855),U=t(3994),B=t(3382),D=t(9174),E=t(5395),N=t(3400),R=t(4515),z=t(4865),F=t(1715),T=t(493),L=t(4852),J=t(9900),M=t(4934),$=t(184);var _=function(e){var n=e.size,t=e.batchDemoteToUser,r=(0,o.useState)(!1),i=(0,c.Z)(r,2),s=i[0],a=i[1],u=(0,o.useRef)(null),l=function(){a(!1)};return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(d.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,$.jsx)(d.Z,{display:"flex",alignItems:"center",children:(0,$.jsx)(h.Z,{variant:"h5",color:"text.secondary",children:n>1?n+" users selected.":n+" user selected."})}),(0,$.jsx)(N.Z,{color:"primary",onClick:function(){a(!0)},ref:u,sx:{ml:2,p:1},children:(0,$.jsx)(M.Z,{})})]}),(0,$.jsx)(F.Z,{keepMounted:!0,anchorEl:u.current,open:s,onClose:l,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"},children:(0,$.jsx)(T.Z,{sx:{p:1},component:"nav",children:(0,$.jsx)(L.ZP,{button:!0,onClick:function(e){return t(),void l()},children:(0,$.jsx)(J.Z,{primary:"Demote Admin to User"})})})})]})},q=[{id:"all",name:"All"},{id:"male",name:"Male"},{id:"female",name:"Female"}];function G(e){var n=e.users,t=e.demoteToUser,i=(0,o.useState)([]),s=(0,c.Z)(i,2),a=s[0],u=s[1],l=(0,o.useState)(0),f=(0,c.Z)(l,2),Z=f[0],x=f[1],m=(0,o.useState)(5),j=(0,c.Z)(m,2),v=j[0],F=j[1],T=(0,o.useState)({status:null}),L=(0,c.Z)(T,2),J=L[0],M=L[1],G=(0,o.useState)([]),H=(0,c.Z)(G,2),K=H[0],Q=H[1],V=(0,o.useState)([]),X=(0,c.Z)(V,2),Y=X[0],ee=X[1],ne=(0,p.Z)();(0,o.useEffect)((function(){switch(J.status){case"male":var e=n.filter((function(e){return"Male"===e.account.gender}));Q((function(n){return e}));break;case"female":var t=n.filter((function(e){return"Female"===e.account.gender}));Q((function(e){return t}));break;default:Q((function(e){return n}))}}),[n,J]),(0,o.useEffect)((function(){var e=function(e,n,t){return e.slice(n*t,n*t+t)}(K,Z,v);ee((function(n){return e}))}),[Z,v,K]);return(0,$.jsxs)(b.Z,{children:[a.length>0&&(0,$.jsx)(d.Z,{flex:1,p:2,children:(0,$.jsx)(_,{size:a.length,batchDemoteToUser:function(){return a.forEach((function(e){t(e)})),void u([])}})}),0===a.length&&(0,$.jsx)(k.Z,{action:(0,$.jsx)(d.Z,{width:150,children:(0,$.jsxs)(y.Z,{fullWidth:!0,variant:"outlined",children:[(0,$.jsx)(S.Z,{children:"Status"}),(0,$.jsx)(w.Z,{value:J.status||"all",onChange:function(e){var n=null;"all"!==e.target.value&&(n=e.target.value),M((function(e){return(0,r.Z)((0,r.Z)({},e),{},{status:n})}))},label:"Status",autoWidth:!0,children:q.map((function(e){return(0,$.jsx)(C.Z,{value:e.id,children:e.name},e.id)}))})]})}),title:"Admin List"}),(0,$.jsx)(I.Z,{}),(0,$.jsx)(O.Z,{children:(0,$.jsxs)(W.Z,{children:[(0,$.jsx)(A.Z,{children:(0,$.jsxs)(P.Z,{children:[(0,$.jsx)(U.Z,{padding:"checkbox"}),(0,$.jsx)(U.Z,{children:"User ID"}),(0,$.jsx)(U.Z,{children:"First Name"}),(0,$.jsx)(U.Z,{children:"Last Name"}),(0,$.jsx)(U.Z,{children:"Gender"}),(0,$.jsx)(U.Z,{children:"Contact"}),(0,$.jsx)(U.Z,{align:"right",children:"Actions"})]})}),(0,$.jsx)(B.Z,{children:Y.map((function(e){var n=a.includes(e.riderId);return(0,$.jsxs)(P.Z,{hover:!0,selected:n,children:[(0,$.jsx)(U.Z,{padding:"checkbox",children:(0,$.jsx)(D.Z,{color:"primary",checked:n,value:n,onChange:function(n){return t=e.riderId,void(a.includes(t)?u((function(e){return e.filter((function(e){return e!==t}))})):u((function(e){return[].concat((0,g.Z)(e),[t])})));var t}})}),(0,$.jsx)(U.Z,{children:(0,$.jsx)(h.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:e.account.userId})}),(0,$.jsx)(U.Z,{children:(0,$.jsx)(h.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:e.account.firstName})}),(0,$.jsx)(U.Z,{children:(0,$.jsx)(h.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:e.account.lastName})}),(0,$.jsx)(U.Z,{children:(0,$.jsx)(h.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:e.account.gender})}),(0,$.jsx)(U.Z,{children:(0,$.jsx)(h.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:e.account.contact})}),(0,$.jsx)(U.Z,{align:"right",children:(0,$.jsx)(E.Z,{title:"Demote to User",arrow:!0,children:(0,$.jsx)(N.Z,{sx:{"&:hover":{background:ne.colors.error.lighter},color:ne.palette.error.main},color:"inherit",size:"small",onClick:function(n){return t(e.account.userId)},children:(0,$.jsx)(z.Z,{fontSize:"small"})})})})]},e.account.userId)}))})]})}),(0,$.jsx)(d.Z,{p:2,children:(0,$.jsx)(R.Z,{component:"div",count:K.length,onPageChange:function(e,n){x(n)},onRowsPerPageChange:function(e){F(parseInt(e.target.value))},page:Z,rowsPerPage:v,rowsPerPageOptions:[5,10,25,30]})})]})}var H=t(3576),K=t(2419);var Q=function(){var e=(0,x.h)().database,n=(0,Z.s0)(),t=(0,o.useState)([]),s=(0,c.Z)(t,2),g=s[0],p=s[1],b=(0,o.useState)(!1),k=(0,c.Z)(b,2),y=k[0],S=k[1],w=(0,o.useState)({openSnackbar:!1,success:!0,message:""}),C=(0,c.Z)(w,2),I=C[0],O=C[1];return(0,o.useEffect)((function(){function n(){return(n=(0,i.Z)(a().mark((function n(){var t,r,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=[],r=[],n.next=4,(0,m.PL)((0,m.hJ)(e,"accounts"));case 4:return i=n.sent,n.next=7,(0,m.PL)((0,m.hJ)(e,"admin"));case 7:n.sent.forEach((function(e){var n=(0,v.$)(e);t.push(n.getRider())})),i.forEach((function(e){var n=(0,j.B)(e);t.forEach((function(e){var t=n.getUser();if(e.riderId===t.userId){var i=new v.Z(e);i.setAccount(t),r.push(i.getRider())}}))})),p((function(e){return r}));case 11:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[e,y]),(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(u.q,{children:(0,$.jsx)("title",{children:"Admin"})}),(0,$.jsxs)(l.Z,{children:[(0,$.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:5,marginBottom:3},children:[(0,$.jsx)(h.Z,{variant:"h1",color:"primary",children:"Admin"}),(0,$.jsx)(f.Z,{variant:"contained",startIcon:(0,$.jsx)(K.Z,{}),onClick:function(e){return n("/dashboards/users")},children:"Add Admin"})]}),(0,$.jsx)(G,{users:g,demoteToUser:function(n){return function(n){(0,m.oe)((0,m.JU)(e,"admin",n)).then((function(e){O((0,r.Z)((0,r.Z)({},I),{},{openSnackbar:!0,success:!0,message:"Removed admin successfully!"}))})).catch((function(e){O((0,r.Z)((0,r.Z)({},I),{},{openSnackbar:!0,success:!1,message:"Failed to remover admin."}))})),S(!y)}(n)}})]}),(0,$.jsx)(H.Z,{openSnackbar:I.openSnackbar,success:I.success,message:I.message,setOpenSnackbar:function(e){return O((0,r.Z)((0,r.Z)({},I),{},{openSnackbar:e}))}})]})}}}]);
//# sourceMappingURL=281.346faea9.chunk.js.map