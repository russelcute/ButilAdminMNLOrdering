"use strict";(self.webpackChunkbutil_admin=self.webpackChunkbutil_admin||[]).push([[260],{3576:function(e,n,t){var r=t(1413),o=t(2791),c=t(4575),i=t(9658),a=t(184),s=o.forwardRef((function(e,n){return(0,a.jsx)(i.Z,(0,r.Z)({elevation:6,ref:n,variant:"filled"},e))}));n.Z=function(e){var n=e.openSnackbar,t=e.success,r=e.message,o=e.setOpenSnackbar,i=function(e,n){"clickaway"!==n&&o(!1)};return(0,a.jsx)(c.Z,{open:n,autoHideDuration:6e3,onClose:i,children:(0,a.jsx)(s,{onClose:i,severity:t?"success":"error",sx:{width:"100%"},children:r})})}},4993:function(e,n,t){t.d(n,{B:function(){return i}});var r=t(5671),o=t(3144),c=function(){function e(n){(0,r.Z)(this,e),this.userObject=void 0,this.userObject=n}return(0,o.Z)(e,[{key:"getUser",value:function(){return this.userObject}}]),e}();function i(e){var n=e.data(),t={userId:e.id,contact:n.contact,firstName:n.firstName,lastName:n.lastName,gender:n.gender};return new c(t)}},8260:function(e,n,t){t.r(n),t.d(n,{default:function(){return Y}});var r=t(1413),o=t(5861),c=t(885),i=t(7757),a=t.n(i),s=t(2791),d=t(6907),l=t(6445),u=t(8530),h=t(890),f=t(4518),Z=t(6871),m=t(376),p=t(9062),v=t(4993),x=t(4569),j=t.n(x),g=t(2982),b=t(3967),k=t(7621),y=t(9585),S=t(8096),z=t(4925),C=t(9321),w=t(5022),P=t(4721),I=t(9281),F=t(9836),R=t(6890),B=t(5855),M=t(3994),O=t(3382),A=t(9174),H=t(5395),U=t(3400),N=t(4515),V=t(2271),W=t(3437),E=t(2920),T=t(1715),L=t(493),D=t(4852),q=t(9900),J=t(4934),_=t(184);var G=function(e){var n=e.size,t=e.batchPromoteToRider,r=e.batchPromoteToAdmin,o=(0,s.useState)(!1),i=(0,c.Z)(o,2),a=i[0],d=i[1],l=(0,s.useRef)(null),f=function(){d(!1)};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(u.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,_.jsx)(u.Z,{display:"flex",alignItems:"center",children:(0,_.jsx)(h.Z,{variant:"h5",color:"text.secondary",children:n>1?n+" users selected.":n+" user selected."})}),(0,_.jsx)(U.Z,{color:"primary",onClick:function(){d(!0)},ref:l,sx:{ml:2,p:1},children:(0,_.jsx)(J.Z,{})})]}),(0,_.jsx)(T.Z,{keepMounted:!0,anchorEl:l.current,open:a,onClose:f,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"},children:(0,_.jsxs)(L.Z,{sx:{p:1},component:"nav",children:[(0,_.jsx)(D.ZP,{button:!0,onClick:function(e){return t(),void f()},children:(0,_.jsx)(q.Z,{primary:"Promote user as Rider"})}),(0,_.jsx)(D.ZP,{button:!0,onClick:function(e){return r(),void f()},children:(0,_.jsx)(q.Z,{primary:"Promote user as Admin"})})]})})]})},$=[{id:"all",name:"All"},{id:"male",name:"Male"},{id:"female",name:"Female"}];function K(e){var n=e.users,t=e.promoteToRider,o=e.promoteToAdmin,i=e.deleteUser,a=(0,s.useState)([]),d=(0,c.Z)(a,2),l=d[0],f=d[1],Z=(0,s.useState)(0),m=(0,c.Z)(Z,2),p=m[0],v=m[1],x=(0,s.useState)(5),j=(0,c.Z)(x,2),T=j[0],L=j[1],D=(0,s.useState)({status:null}),q=(0,c.Z)(D,2),J=q[0],K=q[1],Q=(0,s.useState)([]),X=(0,c.Z)(Q,2),Y=X[0],ee=X[1],ne=(0,s.useState)([]),te=(0,c.Z)(ne,2),re=te[0],oe=te[1],ce=(0,b.Z)();(0,s.useEffect)((function(){switch(J.status){case"male":var e=n.filter((function(e){return"Male"===e.gender}));ee((function(n){return e}));break;case"female":var t=n.filter((function(e){return"Female"===e.gender}));ee((function(e){return t}));break;default:ee((function(e){return n}))}}),[n,J]),(0,s.useEffect)((function(){var e=function(e,n,t){return e.slice(n*t,n*t+t)}(Y,p,T);oe((function(n){return e}))}),[p,T,Y]);return(0,_.jsxs)(k.Z,{children:[l.length>0&&(0,_.jsx)(u.Z,{flex:1,p:2,children:(0,_.jsx)(G,{size:l.length,batchPromoteToAdmin:function(){return l.forEach((function(e){o(e)})),void f([])},batchPromoteToRider:function(){return l.forEach((function(e){t(e)})),void f([])}})}),0===l.length&&(0,_.jsx)(y.Z,{action:(0,_.jsx)(u.Z,{width:150,children:(0,_.jsxs)(S.Z,{fullWidth:!0,variant:"outlined",children:[(0,_.jsx)(z.Z,{children:"Status"}),(0,_.jsx)(C.Z,{value:J.status||"all",onChange:function(e){var n=null;"all"!==e.target.value&&(n=e.target.value),K((function(e){return(0,r.Z)((0,r.Z)({},e),{},{status:n})}))},label:"Status",autoWidth:!0,children:$.map((function(e){return(0,_.jsx)(w.Z,{value:e.id,children:e.name},e.id)}))})]})}),title:"User List"}),(0,_.jsx)(P.Z,{}),(0,_.jsx)(I.Z,{children:(0,_.jsxs)(F.Z,{children:[(0,_.jsx)(R.Z,{children:(0,_.jsxs)(B.Z,{children:[(0,_.jsx)(M.Z,{padding:"checkbox"}),(0,_.jsx)(M.Z,{children:"User ID"}),(0,_.jsx)(M.Z,{children:"First Name"}),(0,_.jsx)(M.Z,{children:"Last Name"}),(0,_.jsx)(M.Z,{children:"Gender"}),(0,_.jsx)(M.Z,{children:"Contact"}),(0,_.jsx)(M.Z,{align:"right",children:"Actions"})]})}),(0,_.jsx)(O.Z,{children:re.map((function(e){var n=l.includes(e.userId);return(0,_.jsxs)(B.Z,{hover:!0,selected:n,children:[(0,_.jsx)(M.Z,{padding:"checkbox",children:(0,_.jsx)(A.Z,{color:"primary",checked:n,value:n,onChange:function(n){return t=e.userId,void(l.includes(t)?f((function(e){return e.filter((function(e){return e!==t}))})):f((function(e){return[].concat((0,g.Z)(e),[t])})));var t}})}),(0,_.jsx)(M.Z,{children:(0,_.jsx)(h.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:e.userId})}),(0,_.jsx)(M.Z,{children:(0,_.jsx)(h.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:e.firstName})}),(0,_.jsx)(M.Z,{children:(0,_.jsx)(h.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:e.lastName})}),(0,_.jsx)(M.Z,{children:(0,_.jsx)(h.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:e.gender})}),(0,_.jsx)(M.Z,{children:(0,_.jsx)(h.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:e.contact})}),(0,_.jsxs)(M.Z,{align:"right",children:[(0,_.jsx)(H.Z,{title:"Promote to Rider",arrow:!0,children:(0,_.jsx)(U.Z,{sx:{"&:hover":{background:ce.colors.info.lighter},color:ce.palette.secondary.main},color:"inherit",size:"small",onClick:function(n){return t(e.userId)},children:(0,_.jsx)(E.Z,{fontSize:"small"})})}),(0,_.jsx)(H.Z,{title:"Promote to Admin",arrow:!0,children:(0,_.jsx)(U.Z,{sx:{"&:hover":{background:ce.colors.warning.lighter},color:ce.palette.secondary.main},color:"inherit",size:"small",onClick:function(n){return o(e.userId)},children:(0,_.jsx)(W.Z,{fontSize:"small"})})}),(0,_.jsx)(H.Z,{title:"Delete User",arrow:!0,children:(0,_.jsx)(U.Z,{sx:{"&:hover":{background:ce.colors.error.lighter},color:ce.palette.error.main},color:"inherit",size:"small",onClick:function(n){return i(e.userId)},children:(0,_.jsx)(V.Z,{fontSize:"small"})})})]})]},e.userId)}))})]})}),(0,_.jsx)(u.Z,{p:2,children:(0,_.jsx)(N.Z,{component:"div",count:Y.length,onPageChange:function(e,n){v(n)},onRowsPerPageChange:function(e){L(parseInt(e.target.value))},page:p,rowsPerPage:T,rowsPerPageOptions:[5,10,25,30]})})]})}var Q=t(3576),X=t(2419);var Y=function(){var e=(0,m.h)().database,n=(0,Z.s0)(),t=(0,s.useState)(!1),i=(0,c.Z)(t,2),x=i[0],g=i[1],b=(0,s.useState)([]),k=(0,c.Z)(b,2),y=k[0],S=k[1],z=(0,s.useState)({openSnackbar:!1,success:!0,message:""}),C=(0,c.Z)(z,2),w=C[0],P=C[1];return(0,s.useEffect)((function(){function n(){return(n=(0,o.Z)(a().mark((function n(){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=[],n.next=3,(0,p.PL)((0,p.hJ)(e,"accounts"));case 3:n.sent.forEach((function(e){var n=(0,v.B)(e);t.push(n.getUser())})),S((function(e){return t}));case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[e,x]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(d.q,{children:(0,_.jsx)("title",{children:"Users"})}),(0,_.jsxs)(l.Z,{children:[(0,_.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:5,marginBottom:3},children:[(0,_.jsx)(h.Z,{variant:"h1",color:"primary",children:"Users"}),(0,_.jsx)(f.Z,{variant:"contained",startIcon:(0,_.jsx)(X.Z,{}),onClick:function(e){return n("/dashboards/users/create")},children:"Add User"})]}),(0,_.jsx)(K,{users:y,promoteToRider:function(n){return function(n){(0,p.pl)((0,p.JU)(e,"delivery",n),{active:!0,assignedDeliver:[]}).then((function(e){P((0,r.Z)((0,r.Z)({},w),{},{openSnackbar:!0,success:!0,message:"Added rider successfully!"}))})).catch((function(e){P((0,r.Z)((0,r.Z)({},w),{},{openSnackbar:!0,success:!1,message:"Failed to add rider."}))}))}(n)},promoteToAdmin:function(n){return function(n){(0,p.pl)((0,p.JU)(e,"admin",n),{active:!0}).then((function(e){P((0,r.Z)((0,r.Z)({},w),{},{openSnackbar:!0,success:!0,message:"Added admin successfully!"}))})).catch((function(e){P((0,r.Z)((0,r.Z)({},w),{},{openSnackbar:!0,success:!1,message:"Failed to add admin."}))}))}(n)},deleteUser:function(n){return function(n){j().get("https://butiladmin.herokuapp.com/api/jsdhfyyrhv7&ggeimcv_$hrjeuifcv/user/delete/"+n).then((function(t){(0,p.oe)((0,p.JU)(e,"accounts",n)).then((function(){P((0,r.Z)((0,r.Z)({},w),{},{openSnackbar:!0,success:!0,message:"Deleted user successfully!"}))})).catch((function(e){P((0,r.Z)((0,r.Z)({},w),{},{openSnackbar:!0,success:!1,message:"Failed to delete user."}))}))})).catch((function(e){P((0,r.Z)((0,r.Z)({},w),{},{openSnackbar:!0,success:!1,message:"Failed to delete user."}))})),g(!x)}(n)}})]}),(0,_.jsx)(Q.Z,{openSnackbar:w.openSnackbar,success:w.success,message:w.message,setOpenSnackbar:function(e){return P((0,r.Z)((0,r.Z)({},w),{},{openSnackbar:e}))}})]})}},2419:function(e,n,t){var r=t(5318);n.Z=void 0;var o=r(t(5649)),c=t(184),i=(0,o.default)((0,c.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");n.Z=i},3437:function(e,n,t){var r=t(5318);n.Z=void 0;var o=r(t(5649)),c=t(184),i=(0,o.default)([(0,c.jsx)("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6z"},"0"),(0,c.jsx)("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"},"1")],"AdminPanelSettings");n.Z=i},2271:function(e,n,t){var r=t(5318);n.Z=void 0;var o=r(t(5649)),c=t(184),i=(0,o.default)((0,c.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline");n.Z=i},2920:function(e,n,t){var r=t(5318);n.Z=void 0;var o=r(t(5649)),c=t(184),i=(0,o.default)([(0,c.jsx)("path",{d:"M19 7c0-1.1-.9-2-2-2h-3v2h3v2.65L13.52 14H10V9H6c-2.21 0-4 1.79-4 4v3h2c0 1.66 1.34 3 3 3s3-1.34 3-3h4.48L19 10.35V7zM7 17c-.55 0-1-.45-1-1h2c0 .55-.45 1-1 1z"},"0"),(0,c.jsx)("path",{d:"M5 6h5v2H5zm14 7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm0 4c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"},"1")],"DeliveryDining");n.Z=i},4934:function(e,n,t){var r=t(5318);n.Z=void 0;var o=r(t(5649)),c=t(184),i=(0,o.default)((0,c.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertTwoTone");n.Z=i},9174:function(e,n,t){t.d(n,{Z:function(){return H}});var r=t(4942),o=t(3366),c=t(7462),i=t(2791),a=(t(2007),t(9468)),s=t(48),d=t(885),l=t(8182),u=t(4036),h=t(33),f=t(8744),Z=t(2930),m=t(3701),p=t(1920),v=t(6309);function x(e){return(0,p.Z)("PrivateSwitchBase",e)}(0,v.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var j=t(184),g=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],b=(0,h.ZP)(m.Z,{skipSx:!0})((function(e){var n=e.ownerState;return(0,c.Z)({padding:9,borderRadius:"50%"},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})})),k=(0,h.ZP)("input",{skipSx:!0})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),y=i.forwardRef((function(e,n){var t=e.autoFocus,r=e.checked,i=e.checkedIcon,s=e.className,h=e.defaultChecked,m=e.disabled,p=e.disableFocusRipple,v=void 0!==p&&p,y=e.edge,S=void 0!==y&&y,z=e.icon,C=e.id,w=e.inputProps,P=e.inputRef,I=e.name,F=e.onBlur,R=e.onChange,B=e.onFocus,M=e.readOnly,O=e.required,A=e.tabIndex,H=e.type,U=e.value,N=(0,o.Z)(e,g),V=(0,f.Z)({controlled:r,default:Boolean(h),name:"SwitchBase",state:"checked"}),W=(0,d.Z)(V,2),E=W[0],T=W[1],L=(0,Z.Z)(),D=m;L&&"undefined"===typeof D&&(D=L.disabled);var q="checkbox"===H||"radio"===H,J=(0,c.Z)({},e,{checked:E,disabled:D,disableFocusRipple:v,edge:S}),_=function(e){var n=e.classes,t=e.checked,r=e.disabled,o=e.edge,c={root:["root",t&&"checked",r&&"disabled",o&&"edge".concat((0,u.Z)(o))],input:["input"]};return(0,a.Z)(c,x,n)}(J);return(0,j.jsxs)(b,(0,c.Z)({component:"span",className:(0,l.Z)(_.root,s),centerRipple:!0,focusRipple:!v,disabled:D,tabIndex:null,role:void 0,onFocus:function(e){B&&B(e),L&&L.onFocus&&L.onFocus(e)},onBlur:function(e){F&&F(e),L&&L.onBlur&&L.onBlur(e)},ownerState:J,ref:n},N,{children:[(0,j.jsx)(k,(0,c.Z)({autoFocus:t,checked:r,defaultChecked:h,className:_.input,disabled:D,id:q&&C,name:I,onChange:function(e){if(!e.nativeEvent.defaultPrevented){var n=e.target.checked;T(n),R&&R(e,n)}},readOnly:M,ref:P,required:O,ownerState:J,tabIndex:A,type:H},"checkbox"===H&&void 0===U?{}:{value:U},w)),E?i:z]}))})),S=t(6182),z=(0,S.Z)((0,j.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),C=(0,S.Z)((0,j.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),w=(0,S.Z)((0,j.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),P=t(1894);function I(e){return(0,p.Z)("MuiCheckbox",e)}var F=(0,v.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),R=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size"],B=(0,h.ZP)(y,{shouldForwardProp:function(e){return(0,h.FO)(e)||"classes"===e},name:"MuiCheckbox",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,t.indeterminate&&n.indeterminate,"default"!==t.color&&n["color".concat((0,u.Z)(t.color))]]}})((function(e){var n,t=e.theme,o=e.ownerState;return(0,c.Z)({color:t.palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:(0,s.Fq)("default"===o.color?t.palette.action.active:t.palette[o.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==o.color&&(n={},(0,r.Z)(n,"&.".concat(F.checked,", &.").concat(F.indeterminate),{color:t.palette[o.color].main}),(0,r.Z)(n,"&.".concat(F.disabled),{color:t.palette.action.disabled}),n))})),M=(0,j.jsx)(C,{}),O=(0,j.jsx)(z,{}),A=(0,j.jsx)(w,{}),H=i.forwardRef((function(e,n){var t,r,s=(0,P.Z)({props:e,name:"MuiCheckbox"}),d=s.checkedIcon,l=void 0===d?M:d,h=s.color,f=void 0===h?"primary":h,Z=s.icon,m=void 0===Z?O:Z,p=s.indeterminate,v=void 0!==p&&p,x=s.indeterminateIcon,g=void 0===x?A:x,b=s.inputProps,k=s.size,y=void 0===k?"medium":k,S=(0,o.Z)(s,R),z=v?g:m,C=v?g:l,w=(0,c.Z)({},s,{color:f,indeterminate:v,size:y}),F=function(e){var n=e.classes,t=e.indeterminate,r=e.color,o={root:["root",t&&"indeterminate","color".concat((0,u.Z)(r))]},i=(0,a.Z)(o,I,n);return(0,c.Z)({},n,i)}(w);return(0,j.jsx)(B,(0,c.Z)({type:"checkbox",inputProps:(0,c.Z)({"data-indeterminate":v},b),icon:i.cloneElement(z,{fontSize:null!=(t=z.props.fontSize)?t:y}),checkedIcon:i.cloneElement(C,{fontSize:null!=(r=C.props.fontSize)?r:y}),ownerState:w,ref:n},S,{classes:F}))}))}}]);
//# sourceMappingURL=260.4100d3a9.chunk.js.map