"use strict";(self.webpackChunkbutil_admin=self.webpackChunkbutil_admin||[]).push([[215],{3576:function(e,n,r){var t=r(1413),o=r(2791),a=r(4575),c=r(9658),i=r(184),s=o.forwardRef((function(e,n){return(0,i.jsx)(c.Z,(0,t.Z)({elevation:6,ref:n,variant:"filled"},e))}));n.Z=function(e){var n=e.openSnackbar,r=e.success,t=e.message,o=e.setOpenSnackbar,c=function(e,n){"clickaway"!==n&&o(!1)};return(0,i.jsx)(a.Z,{open:n,autoHideDuration:6e3,onClose:c,children:(0,i.jsx)(s,{onClose:c,severity:r?"success":"error",sx:{width:"100%"},children:t})})}},2568:function(e,n,r){r.d(n,{a:function(){return c}});var t=r(5671),o=r(3144),a=function(){function e(n){(0,t.Z)(this,e),this.orderObject=void 0,this.orderObject=n}return(0,o.Z)(e,[{key:"getOrder",value:function(){return this.orderObject}},{key:"setAssigned",value:function(e){this.orderObject.assigned=e}},{key:"setDelivered",value:function(e){this.orderObject.delivered=e}}]),e}();function c(e){var n=e.data(),r=[];n.contents.forEach((function(e){r.push({price:e.price,productId:e.productId,quantity:e.quantity})}));var t={orderId:e.id,contents:r,customer:{contact:n.customer.contact,userName:n.customer.userName,address:n.customer.address,email:n.customer.email,gender:n.customer.gender,latitude:0,longitude:0,uid:n.customer.uid},amountDue:n.amountDue,assigned:n.assigned,delivered:n.delivered,orderDate:n.orderDate.toDate(),paid:n.paid,paymentType:n.paymentType,paymentProof:n.paymentProof};return new a(t)}},1215:function(e,n,r){r.r(n),r.d(n,{default:function(){return $}});var t=r(1413),o=r(5861),a=r(885),c=r(7757),i=r.n(c),s=r(2791),d=r(6907),l=r(6445),u=r(8530),h=r(890),p=r(376),f=r(9062),m=r(2568),v=r(3576),x=r(7621),Z=r(9585),g=r(8096),j=r(4925),y=r(9321),b=r(5022),z=r(4721),k=r(9281),w=r(9836),S=r(6890),H=r(5855),D=r(3994),M=r(3382),C=r(4515),P=r(3967),O=r(3400),L=r(5395),T=r(6125),I=r(5987),V=r(33),W=r(184),B=["className","color","children"],E=(0,V.ZP)("span")((function(e){var n=e.theme;return"\n      background-color: ".concat(n.colors.alpha.black[5],";\n      padding: ").concat(n.spacing(.5,1),";\n      font-size: ").concat(n.typography.pxToRem(13),";\n      border-radius: ").concat(n.general.borderRadius,";\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      max-height: ").concat(n.spacing(3),";\n      \n      &.MuiLabel {\n        &-primary {\n          background-color: ").concat(n.colors.primary.lighter,";\n          color: ").concat(n.palette.primary.main,"\n        }\n        \n        &-secondary {\n          background-color: ").concat(n.colors.secondary.lighter,";\n          color: ").concat(n.palette.secondary.main,"\n        }\n        \n        &-success {\n          background-color: ").concat(n.colors.success.lighter,";\n          color: ").concat(n.palette.success.main,"\n        }\n        \n        &-warning {\n          background-color: ").concat(n.colors.warning.lighter,";\n          color: ").concat(n.palette.warning.main,"\n        }\n              \n        &-error {\n          background-color: ").concat(n.colors.error.lighter,";\n          color: ").concat(n.palette.error.main,"\n        }\n        \n        &-info {\n          background-color: ").concat(n.colors.info.lighter,";\n          color: ").concat(n.palette.info.main,"\n        }\n      }\n")})),U=function(e){e.className;var n=e.color,r=void 0===n?"secondary":n,o=e.children,a=(0,I.Z)(e,B);return(0,W.jsx)(E,(0,t.Z)((0,t.Z)({className:"MuiLabel-"+r},a),{},{children:o}))},A=r(9794),N=r(66),R=r(5172),q=r(5678),F=r(5256),J=r(4750),G=r(8068),K=r(6871),_=function(e){switch(e){case"completed":return(0,W.jsx)(U,{color:"success",children:"Completed"});case"paid":return(0,W.jsx)(U,{color:"info",children:"Paid"});case"delivered":return(0,W.jsx)(U,{color:"info",children:"Delivered"});case"pending":return(0,W.jsx)(U,{color:"warning",children:"Pending"});default:return(0,W.jsx)(U,{color:"error",children:"Unassigned"})}};var Q=function(e){var n=e.order,r=e.modifyDelivered,t=e.modifyPaid,o=(0,K.s0)(),c=(0,P.Z)(),i=s.useState(!1),d=(0,a.Z)(i,2),l=d[0],p=d[1];return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(H.Z,{hover:!0,children:[(0,W.jsx)(D.Z,{children:(0,W.jsx)(O.Z,{"aria-label":"expand row",size:"small",onClick:function(){return p(!l)},children:l?(0,W.jsx)(q.Z,{}):(0,W.jsx)(R.Z,{})})}),(0,W.jsx)(D.Z,{children:(0,W.jsx)(h.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:n.orderId})}),(0,W.jsx)(D.Z,{children:(0,W.jsx)(h.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:n.customer.userName})}),(0,W.jsx)(D.Z,{children:(0,W.jsx)(h.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:new Date(n.orderDate).toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"short",day:"numeric"})})}),(0,W.jsx)(D.Z,{children:(0,W.jsx)(h.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:"\u20b1"+n.amountDue})}),(0,W.jsx)(D.Z,{children:(0,W.jsx)(h.Z,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:_(n.paid&&n.delivered?"completed":n.assigned?"pending":"unassigned")})}),(0,W.jsxs)(D.Z,{align:"right",children:[(0,W.jsx)(L.Z,{title:"Assign Rider",arrow:!0,children:(0,W.jsx)(O.Z,{sx:{"&:hover":{background:c.colors.warning.lighter},color:c.palette.primary.main},color:"inherit",size:"small",disabled:n.delivered,onClick:function(e){return o("/dashboards/orders/assign/"+n.orderId)},children:(0,W.jsx)(F.Z,{fontSize:"small"})})}),(0,W.jsx)(L.Z,{title:n.delivered?"Set Undelivered":"Set Delivered",arrow:!0,children:(0,W.jsx)(O.Z,{sx:{"&:hover":{background:c.colors.info.lighter},color:c.palette.secondary.main},color:"inherit",size:"small",onClick:function(e){return r(n.orderId,n.delivered)},children:n.delivered?(0,W.jsx)(J.Z,{fontSize:"small"}):(0,W.jsx)(A.Z,{fontSize:"small"})})}),(0,W.jsx)(L.Z,{title:n.paid?"Set Unpaid":"Set Paid",arrow:!0,children:(0,W.jsx)(O.Z,{sx:{"&:hover":{background:c.colors.warning.lighter},color:c.palette.secondary.main},color:"inherit",size:"small",onClick:function(e){return t(n.orderId,n.paid)},children:n.paid?(0,W.jsx)(G.Z,{fontSize:"small"}):(0,W.jsx)(N.Z,{fontSize:"small"})})})]})]}),(0,W.jsx)(H.Z,{children:(0,W.jsx)(D.Z,{style:{paddingBottom:0,paddingTop:0},colSpan:4,children:(0,W.jsx)(T.Z,{in:l,timeout:"auto",unmountOnExit:!0,children:(0,W.jsxs)(u.Z,{sx:{margin:1},children:[(0,W.jsx)(h.Z,{variant:"h6",gutterBottom:!0,component:"div",children:"Order Items"}),(0,W.jsxs)(w.Z,{size:"small","aria-label":"purchases",children:[(0,W.jsx)(S.Z,{children:(0,W.jsxs)(H.Z,{children:[(0,W.jsx)(D.Z,{children:"Product ID"}),(0,W.jsx)(D.Z,{children:"Quantity"}),(0,W.jsx)(D.Z,{align:"right",children:"Total price (\u20b1)"})]})}),(0,W.jsx)(M.Z,{children:n.contents.map((function(e,n){return(0,W.jsxs)(H.Z,{children:[(0,W.jsx)(D.Z,{component:"th",scope:"row",children:e.productId}),(0,W.jsx)(D.Z,{children:e.quantity}),(0,W.jsx)(D.Z,{align:"right",children:"\u20b1"+e.price})]},0)}))})]}),(0,W.jsx)("br",{}),Boolean("Gcash"===n.paymentType&&n.paid)&&(0,W.jsx)(h.Z,{variant:"body1",gutterBottom:!0,component:"div",children:"*Order was paid through Gcash with Reference ID of: "+n.paymentProof})]})})})})]})},X=[{id:"all",name:"All"},{id:"completed",name:"Completed"},{id:"pending",name:"Pending"},{id:"unassigned",name:"Unassigned"}];var Y=function(e){var n=e.orders,r=e.modifyDelivered,o=e.modifyPaid,c=(0,s.useState)([]),i=(0,a.Z)(c,2),d=i[0],l=i[1],h=(0,s.useState)([]),p=(0,a.Z)(h,2),f=p[0],m=p[1],v=(0,s.useState)(0),P=(0,a.Z)(v,2),O=P[0],L=P[1],T=(0,s.useState)(5),I=(0,a.Z)(T,2),V=I[0],B=I[1],E=(0,s.useState)({status:null}),U=(0,a.Z)(E,2),A=U[0],N=U[1];return s.useEffect((function(){switch(A.status){case"pending":var e=[];n.forEach((function(n){!n.delivered&&n.assigned&&e.push(n)})),m((function(n){return e}));break;case"unassigned":var r=[];n.forEach((function(e){e.assigned||r.push(e)})),m((function(e){return r}));break;case"completed":var t=[];n.forEach((function(e){e.delivered&&e.paid&&t.push(e)})),m((function(e){return t}));break;default:m((function(e){return n}))}}),[n,A]),s.useEffect((function(){var e=function(e,n,r){return e.slice(n*r,n*r+r)}(f,O,V);l((function(n){return e}))}),[O,V,f]),(0,W.jsxs)(x.Z,{children:[(0,W.jsx)(Z.Z,{action:(0,W.jsx)(u.Z,{width:150,children:(0,W.jsxs)(g.Z,{fullWidth:!0,variant:"outlined",children:[(0,W.jsx)(j.Z,{children:"Status"}),(0,W.jsx)(y.Z,{value:A.status||"all",onChange:function(e){var n=null;"all"!==e.target.value&&(n=e.target.value),N((function(e){return(0,t.Z)((0,t.Z)({},e),{},{status:n})}))},label:"Status",autoWidth:!0,children:X.map((function(e){return(0,W.jsx)(b.Z,{value:e.id,children:e.name},e.id)}))})]})}),title:"Order List"}),(0,W.jsx)(z.Z,{}),(0,W.jsx)(k.Z,{children:(0,W.jsxs)(w.Z,{children:[(0,W.jsx)(S.Z,{children:(0,W.jsxs)(H.Z,{children:[(0,W.jsx)(D.Z,{}),(0,W.jsx)(D.Z,{children:"Order ID"}),(0,W.jsx)(D.Z,{children:"Customer Name"}),(0,W.jsx)(D.Z,{children:"Order Date"}),(0,W.jsx)(D.Z,{children:"Amount Due"}),(0,W.jsx)(D.Z,{children:"Status"}),(0,W.jsx)(D.Z,{align:"right",children:"Actions"})]})}),(0,W.jsx)(M.Z,{children:d.map((function(e,n){return(0,W.jsx)(Q,{order:e,modifyDelivered:function(e,n){return r(e,n)},modifyPaid:function(e,n){return o(e,n)}},n)}))})]})}),(0,W.jsx)(u.Z,{p:2,children:(0,W.jsx)(C.Z,{component:"div",count:f.length,onPageChange:function(e,n){L(n)},onRowsPerPageChange:function(e){B(parseInt(e.target.value))},page:O,rowsPerPage:V,rowsPerPageOptions:[5,10,25,30]})})]})};var $=function(){var e=(0,p.h)().database,n=(0,s.useState)(!1),r=(0,a.Z)(n,2),c=r[0],x=r[1],Z=(0,s.useState)([]),g=(0,a.Z)(Z,2),j=g[0],y=g[1],b=(0,s.useState)({openSnackbar:!1,success:!0,message:""}),z=(0,a.Z)(b,2),k=z[0],w=z[1];return(0,s.useEffect)((function(){function n(){return(n=(0,o.Z)(i().mark((function n(){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=[],n.next=3,(0,f.PL)((0,f.hJ)(e,"orders"));case 3:n.sent.forEach((function(e){var n=(0,m.a)(e);r.push(n.getOrder())})),y((function(e){return r}));case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[e,c]),(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(d.q,{children:(0,W.jsx)("title",{children:"Orders"})}),(0,W.jsxs)(l.Z,{children:[(0,W.jsx)(u.Z,{sx:{display:"flex",justifyContent:"start",alignItems:"center",marginTop:5,marginBottom:3},children:(0,W.jsx)(h.Z,{variant:"h1",color:"primary",children:"Orders"})}),(0,W.jsx)(Y,{orders:j,modifyDelivered:function(n,r){return function(n,r){var o=(0,f.JU)(e,"orders",n);(0,f.r7)(o,{delivered:!r}).then((function(e){w((0,t.Z)((0,t.Z)({},k),{},{openSnackbar:!0,success:!0,message:"Updated the order successfully!"}))})).catch((function(e){w((0,t.Z)((0,t.Z)({},k),{},{openSnackbar:!0,success:!1,message:"Failed to update order."}))})),x(!c)}(n,r)},modifyPaid:function(n,r){return function(n,r){var o=(0,f.JU)(e,"orders",n);(0,f.r7)(o,{paid:!r}).then((function(e){w((0,t.Z)((0,t.Z)({},k),{},{openSnackbar:!0,success:!0,message:"Updated the order successfully!"}))})).catch((function(e){w((0,t.Z)((0,t.Z)({},k),{},{openSnackbar:!0,success:!1,message:"Failed to update order."}))})),x(!c)}(n,r)}})]}),(0,W.jsx)(v.Z,{openSnackbar:k.openSnackbar,success:k.success,message:k.message,setOpenSnackbar:function(e){return w((0,t.Z)((0,t.Z)({},k),{},{openSnackbar:e}))}})]})}},9794:function(e,n,r){var t=r(5318);n.Z=void 0;var o=t(r(5649)),a=r(184),c=(0,o.default)([(0,a.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 10h3.13c.21.78.67 1.47 1.27 2H5v-2zm14 2h-4.4c.6-.53 1.06-1.22 1.27-2H19v2zm0-4h-5v1c0 1.07-.93 2-2 2s-2-.93-2-2V8H5V5h14v3zm-5 7v1c0 .47-.19.9-.48 1.25-.37.45-.92.75-1.52.75s-1.15-.3-1.52-.75c-.29-.35-.48-.78-.48-1.25v-1H3v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-4h-7zm-9 2h3.13c.02.09.06.17.09.25.24.68.65 1.28 1.18 1.75H5v-2zm14 2h-4.4c.54-.47.95-1.07 1.18-1.75.03-.08.07-.16.09-.25H19v2z"},"0"),(0,a.jsx)("path",{d:"M8.13 10H5v2h4.4c-.6-.53-1.06-1.22-1.27-2zm6.47 2H19v-2h-3.13c-.21.78-.67 1.47-1.27 2zm-6.38 5.25c-.03-.08-.06-.16-.09-.25H5v2h4.4c-.53-.47-.94-1.07-1.18-1.75zm7.65-.25c-.02.09-.06.17-.09.25-.23.68-.64 1.28-1.18 1.75H19v-2h-3.13z",opacity:".3"},"1")],"AllInboxTwoTone");n.Z=c},8068:function(e,n,r){var t=r(5318);n.Z=void 0;var o=t(r(5649)),a=r(184),c=(0,o.default)([(0,a.jsx)("path",{d:"M20 17.17V12h-5.17L20 17.17zM10.83 8H20V6H8.83l2 2zM4 6.83V8h1.17L4 6.83zM15.17 18l-6-6H4v6h11.17z",opacity:".3"},"0"),(0,a.jsx)("path",{d:"M6.83 4H20c1.11 0 2 .89 2 2v12c0 .34-.08.66-.23.94L20 17.17V12h-5.17l-4-4H20V6H8.83l-2-2zm13.66 19.31L17.17 20H4c-1.11 0-2-.89-2-2l.01-12c0-.34.08-.66.23-.93L.69 3.51 2.1 2.1l19.8 19.8-1.41 1.41zM4 6.83V8h1.17L4 6.83zM15.17 18l-6-6H4v6h11.17z"},"1")],"CreditCardOffTwoTone");n.Z=c},66:function(e,n,r){var t=r(5318);n.Z=void 0;var o=t(r(5649)),a=r(184),c=(0,o.default)([(0,a.jsx)("path",{d:"M4 12h16v6H4zm0-6h16v2H4z",opacity:".3"},"0"),(0,a.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"},"1")],"CreditCardTwoTone");n.Z=c},5256:function(e,n,r){var t=r(5318);n.Z=void 0;var o=t(r(5649)),a=r(184),c=(0,o.default)([(0,a.jsx)("path",{d:"M4 13v1h4v-3H6c-1.1 0-2 .9-2 2z",opacity:".3"},"0"),(0,a.jsx)("path",{d:"M19 7c0-1.1-.9-2-2-2h-3v2h3v2.65L13.52 14H10V9H6c-2.21 0-4 1.79-4 4v3h2c0 1.66 1.34 3 3 3s3-1.34 3-3h4.48L19 10.35V7zM7 17c-.55 0-1-.45-1-1h2c0 .55-.45 1-1 1zm1-3H4v-1c0-1.1.9-2 2-2h2v3z"},"1"),(0,a.jsx)("path",{d:"M5 6h5v2H5zm14 7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm0 4c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"},"2")],"DeliveryDiningTwoTone");n.Z=c},5172:function(e,n,r){var t=r(5318);n.Z=void 0;var o=t(r(5649)),a=r(184),c=(0,o.default)((0,a.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");n.Z=c},5678:function(e,n,r){var t=r(5318);n.Z=void 0;var o=t(r(5649)),a=r(184),c=(0,o.default)((0,a.jsx)("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp");n.Z=c},4750:function(e,n,r){var t=r(5318);n.Z=void 0;var o=t(r(5649)),a=r(184),c=(0,o.default)([(0,a.jsx)("path",{fillOpacity:".3",d:"M18.5 10.2c0 2.57-2.1 5.79-6.16 9.51l-.34.3-.34-.31C7.6 15.99 5.5 12.77 5.5 10.2c0-3.84 2.82-6.7 6.5-6.7s6.5 2.85 6.5 6.7z"},"0"),(0,a.jsx)("path",{d:"M12.01 16c-.27 0-.52-.1-.71-.29-.2-.2-.29-.43-.29-.71-.01-.55.43-.99.98-1h.02c.28 0 .51.1.71.29.18.19.28.43.28.7s-.1.51-.29.71-.43.3-.7.3zm-.88-3.66c0-.45.1-.84.29-1.16.19-.33.53-.7 1-1.12.28-.25.48-.47.61-.66s.19-.4.19-.64c0-.29-.11-.53-.32-.74-.21-.2-.5-.3-.85-.3-.37 0-.74.1-.96.3-.21.2-.4.45-.4.98H9c0-1.01.46-1.73.97-2.21C10.53 6.28 11.25 6 12 6c.59 0 1.11.12 1.57.35.88.43 1.43 1.33 1.43 2.31 0 .49-.1.9-.31 1.25s-.48.71-.89 1.09c-.32.3-.53.56-.65.77s-.18.49-.18.81V13h-1.85v-.66h.01zM18 10.2C18 6.57 15.35 4 12 4s-6 2.57-6 6.2c0 2.34 1.95 5.44 6 9.14 4.05-3.7 6-6.8 6-9.14zM12 2c4.2 0 8 3.22 8 8.2 0 3.32-2.67 7.25-8 11.8-5.33-4.55-8-8.48-8-11.8C4 5.22 7.8 2 12 2z"},"1")],"NotListedLocationTwoTone");n.Z=c}}]);
//# sourceMappingURL=215.2016ca8d.chunk.js.map